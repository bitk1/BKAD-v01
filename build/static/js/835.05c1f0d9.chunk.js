(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[835],{94030:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(72791),r=a(218),l=a(87945),c=a(53350),s=a(4046);const i=e=>null==e?"":"string"===typeof e?e:JSON.stringify(e),o=(0,r.$)("doUpdateIpfsApiAddress","selectIpfsApiAddress","selectIpfsInitFailed",(0,l.Zh)("app")((e=>{let{t:t,doUpdateIpfsApiAddress:a,ipfsApiAddress:r,ipfsInitFailed:l}=e;const[o,m]=(0,n.useState)(i(r)),p=!(0,s.VI)(o),[d,u]=(0,n.useState)(p||l),[g,h]=(0,n.useState)(p);(0,n.useEffect)((()=>{u(l)}),[g,l]),(0,n.useEffect)((()=>{const e=(0,s.VI)(o);h(e),u(!e)}),[o]);const f=async e=>{e.preventDefault(),a(o)};return n.createElement("form",{onSubmit:f},n.createElement("input",{id:"api-address","aria-label":t("terms.apiAddress"),placeholder:t("apiAddressForm.placeholder"),type:"text",className:"w-100 lh-copy monospace f5 pl1 pv1 mb2 charcoal input-reset ba b--black-20 br1 ".concat(d?"focus-outline-red b--red-muted":"focus-outline-green b--green-muted"),onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"===e.key&&f(e)},value:o}),n.createElement("div",{className:"tr"},n.createElement(c.Z,{minWidth:100,height:40,className:"mt2 mt0-l ml2-l tc",disabled:!g||o===r},t("actions.submit"))))})))},93835:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SettingsPage:()=>Ge,SettingsPageContainer:()=>qe,TranslatedSettingsPage:()=>Ve,default:()=>He});var n=a(72791),r=a(18970),l=a(218),c=a(87945),s=a(14964),i=a(64746),o=a(32224),m=a(70814),p=a(59356),d=a(84855),u=a(53350),g=a(32821),h=a(73788),f=a(75283);const E=e=>{if(!e)return"Unknown";const t=(0,f.Z)({i18n:g.Z,localeCode:e,languages:h});return h[t].nativeName};var b=a(52030),v=a(52558),y=a(26330);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w.apply(this,arguments)}const N=e=>{let{t:t,tReady:a,onLeave:r,link:l,className:c,isIpfsDesktop:s,doDesktopUpdateLanguage:i,...o}=e;return n.createElement(v.u_,w({},o,{className:c,onCancel:r,style:{maxWidth:"40em"}}),n.createElement(v.fe,{Icon:y.Z},n.createElement("p",{className:"charcoal w-80 center"},t("languageModal.description")),n.createElement("div",{className:"pa2 flex flex-wrap"},g.H.map((e=>n.createElement("button",{key:"lang-".concat(e.locale),className:"pa2 w-33 flex nowrap bg-transparent bn outline-0 blue justify-center e2e-languageModal-lang e2e-languageModal-lang_".concat(e.locale),onClick:()=>(e=>{g.Z.changeLanguage(e),s&&i(e),r()})(e.locale)},e.nativeName)))),n.createElement("p",{className:"lh-copy charcoal f6"},t("languageModal.translationProjectIntro"),n.createElement("br",null),n.createElement("a",{href:"https://www.transifex.com/ipfs/public/",rel:"noopener noreferrer",target:"_blank",className:"link blue"},t("languageModal.translationProjectLink")))),n.createElement(v.nK,{justify:"center"},n.createElement(u.Z,{className:"ma2 tc",bg:"bg-gray",onClick:r},t("app:actions.close"))))};N.defaultProps={className:""};const S=(0,l.$)("selectIsIpfsDesktop","doDesktopUpdateLanguage",N);function k(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends n.Component{constructor(){super(...arguments),k(this,"state",{isLanguageModalOpen:!1}),k(this,"onLanguageEditOpen",(()=>this.setState({isLanguageModalOpen:!0}))),k(this,"onLanguageEditClose",(()=>this.setState({isLanguageModalOpen:!1})))}render(){const{t:e}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{className:"flex"},n.createElement("div",{className:"pr4 flex items-center lh-copy charcoal f5 fw5 e2e-languageSelector-current",style:{height:40}},E(g.Z.language)),n.createElement(u.Z,{className:"tc e2e-languageSelector-changeBtn",bg:"bg-teal",minWidth:100,onClick:this.onLanguageEditOpen},e("app:actions.change"))),n.createElement(b.Z,{show:this.state.isLanguageModalOpen,onLeave:this.onLanguageEditClose},n.createElement(S,{className:"outline-0 e2e-languageModal",onLeave:this.onLanguageEditClose,t:e})))}}const x=C;var P=a(4775),A=a(22956),O=a(81694),M=a.n(O),_=a(87705);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Z.apply(this,arguments)}const L=e=>{let{t:t,onLeave:a,onSuccess:r,className:l,service:s,tReady:i,doAddPinningService:o,nickname:m,apiEndpoint:p,visitServiceUrl:d,secretApiKey:g,complianceReportUrl:h,...f}=e;const{register:E,errors:b,clearErrors:y,setError:w,handleSubmit:N}=(0,_.cI)({defaultValues:{nickname:m,apiEndpoint:p,secretApiKey:null}}),S="w-100 lh-copy f5 ph2 pv1 input-reset ba b--black-20 br1 focus-outline";return n.createElement(v.u_,Z({},f,{className:l,onCancel:a,style:{maxWidth:"34em"}}),n.createElement("form",{onSubmit:N((async e=>{try{await o(e),r()}catch(t){console.error(t),w("apiValidation",{type:"manual",message:t.message})}})),onChange:()=>{y("apiValidation")}},n.createElement(v.fe,null,n.createElement("p",null,t("pinningServiceModal.title")),h&&n.createElement("a",{className:"mb1 tl f7 charcoal-muted no-underline underline-hover",target:"_blank",rel:"noreferrer",href:h},t("pinningServiceModal.complianceLabel",{nickname:m})),n.createElement("div",{className:"pa2 pinningManagerServiceModalContainer"},s.icon&&s.name&&n.createElement(n.Fragment,null,n.createElement("label",null,t("pinningServiceModal.service")),n.createElement("div",{className:"flex w-100 items-center"},n.createElement("img",{className:"mr3",src:s.icon,alt:s.name,height:42,style:{objectFit:"contain"}}),n.createElement("span",null,s.name))),n.createElement("label",{htmlFor:"cm-nickname"},t("pinningServiceModal.nickname")),n.createElement("div",{className:"relative"},n.createElement("input",{id:"cm-nickname",name:"nickname",ref:E({required:!0}),type:"text",className:M()(S,b.nickname?"bg-red white":"charcoal"),placeholder:t("pinningServiceModal.nicknamePlaceholder")}),b.nickname&&n.createElement(R,{text:t("errors.nickname")})),n.createElement("label",{htmlFor:"cm-apiEndpoint"},t("pinningServiceModal.apiEndpoint")),n.createElement("div",{className:"relative"},n.createElement("input",{id:"cm-apiEndpoint",name:"apiEndpoint",ref:E({required:!0,pattern:"http(s){0,1}://.*"}),type:"url",className:M()(S,b.apiEndpoint?"bg-red white":"charcoal"),placeholder:t("pinningServiceModal.apiEndpointPlaceholder")}),b.apiEndpoint&&n.createElement(R,{text:"".concat(t("errors.apiError"),": ").concat(t("errors.apiEndpoint"))})),n.createElement("label",{htmlFor:"cm-secretApiKey"},t("pinningServiceModal.secretApiKey"),s.icon&&s.name&&d&&n.createElement("a",{className:"f7 link pv0 lh-copy dib",href:d,rel:"noopener noreferrer",target:"_blank"}," ",t("pinningServiceModal.secretApiKeyHowToLink"))),n.createElement("div",{className:"relative"},n.createElement("input",{id:"cm-secretApiKey",ref:E({required:!0}),name:"secretApiKey",type:"password",autoComplete:"off",className:M()(S,b.secretApiKey?"bg-red white":"charcoal"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),b.secretApiKey&&n.createElement(R,{text:t("errors.secretApiKey")}))),n.createElement("div",null,b.apiValidation&&n.createElement("p",{className:"red f5 ttc"},b.apiValidation.message)),n.createElement("p",{className:"f6"},n.createElement(c.cC,{i18nKey:"pinningServiceModal.description",t:t},"Want to make your custom pinning service available to others?",n.createElement("a",{href:"https://docs.ipfs.tech/how-to/work-with-pinning-services/",rel:"noopener noreferrer",target:"_blank",className:"pv0 dib link",type:"link"},"Learn how.")))),n.createElement(v.nK,{justify:"center",className:"flex flex-row-reverse"},n.createElement(u.Z,{className:"ma2 tc",type:"submit"},t("actions.save")),n.createElement(u.Z,{className:"ma2 tc",bg:"bg-gray",onClick:a},t("actions.cancel")))))};L.defaultProps={className:"",nickname:null,apiEndpoint:null};const R=e=>{let{text:t}=e;return n.createElement("p",{className:"red absolute f7",style:{top:26,left:2}},t)},K=(0,l.$)("doAddPinningService",(0,c.Zh)("settings")(L));function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j.apply(this,arguments)}const I=e=>{let{t:t,tReady:a,onLeave:r,className:l,remoteServiceTemplates:s,pinningServicesDefaults:i,...o}=e;const[m,p]=(0,n.useState)(!1),d=()=>p(!1),g=i[m.name]||{};return n.createElement(v.u_,j({},o,{className:l,onCancel:r,style:{maxWidth:"34em"}}),n.createElement(v.fe,null,n.createElement("p",null,t("pinningModal.title")),n.createElement("div",{className:"pa2 pinningManagerModalContainer"},s.map((e=>{let{icon:t,name:a}=e;return n.createElement("button",{className:"flex items-center pinningManagerModalItem pa1 hoverable-button",key:a,onClick:()=>p({name:a,icon:t})},n.createElement("img",{className:"mr3",src:t,alt:a,width:42,height:42,style:{objectFit:"contain"}}),n.createElement("p",null,a))}))),n.createElement("p",{className:"flex items-center justify-center"},n.createElement(c.cC,{i18nKey:"pinningModal.description",t:t},"Don\u2019t see your pinning service provider? ",n.createElement(u.Z,{className:"pv0",type:"link",onClick:()=>p({type:"CUSTOM"})},"Add a custom one.")))),n.createElement(v.nK,{justify:"center"},n.createElement(u.Z,{className:"ma2 tc",bg:"bg-gray",onClick:r},t("actions.cancel"))),n.createElement(b.Z,{show:!!m,onLeave:d,hidden:!0},n.createElement(K,{className:"outline-0",service:m,onSuccess:()=>{p(!1),r()},onLeave:d,nickname:g.nickname,apiEndpoint:g.apiEndpoint,visitServiceUrl:g.visitServiceUrl,complianceReportUrl:g.complianceReportUrl,t:t})))};I.defaultProps={className:""};const D=(0,l.$)("selectRemoteServiceTemplates","selectPinningServicesDefaults",(0,c.Zh)("settings")(I));function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},T.apply(this,arguments)}const F=e=>{let{name:t,service:a,t:r,onLeave:l,doSetAutoUploadForService:c,className:s,...i}=e;return n.createElement(v.u_,T({},i,{className:s,onCancel:l,style:{maxWidth:"34em"}}),n.createElement(v.fe,null,n.createElement("p",null,r("autoUploadModal.title",{name:t})),n.createElement("div",{className:"pa2 AutoUploadModalContainer"},r("autoUploadModal.description"))),n.createElement(v.nK,{justify:"center"},n.createElement(u.Z,{className:"ma2 tc",bg:"bg-teal",onClick:()=>{c(t),l()}},a.autoUpload?r("actions.disable"):r("actions.enable")),n.createElement(u.Z,{className:"ma2 tc",bg:"bg-gray",onClick:l},r("actions.cancel"))))};F.defaultProps={className:""};const U=(0,l.$)("doSetAutoUploadForService",(0,c.Zh)("settings")(F));var G=a(99283),B=a(19624),z=a(54164);const q=e=>{let{id:t,children:a,zIndex:r}=e;const l=(0,n.useRef)(document.getElementById(t)||document.createElement("div")),[c]=(0,n.useState)(!l.current.parentElement);return(0,n.useEffect)((()=>(c&&(l.current.id=t,r&&(l.current.style.zIndex=r),document.body.appendChild(l.current)),()=>{c&&l.current.parentElement&&l.current.parentElement.removeChild(l.current)})),[c,t,r]),(0,z.createPortal)(a,l.current)},V=(0,n.memo)(q),H=e=>{let{className:t,children:a,target:r,visible:l,arrowAlign:c,arrowMarginRight:s,onDismiss:i}=e;const o=(0,n.useRef)(),[m,p]=(0,n.useState)({});if((0,n.useLayoutEffect)((()=>{const e=()=>{if(null===r||void 0===r||!r.current)return;const{top:e,left:t,width:a,height:n}=r.current.getBoundingClientRect();p({top:e,left:t,width:a,height:n})};e();const t=window.addEventListener("scroll",(()=>{requestAnimationFrame((()=>e()))}));return()=>window.removeEventListener("scroll",t)}),[r,l]),(0,n.useEffect)((()=>{if(null===r||void 0===r||!r.current)return;const e=r.current.querySelector('[role="menuitem"]');e&&e.focus()}),[r,l]),!l||!r||!r.current)return null;const d=W(c,{...m,arrowMarginRight:s});return n.createElement(V,{id:"portal-dropdown"},n.createElement("div",{className:M()("absolute",t),style:{top:m.top,left:m.left}},n.createElement(B.h,{open:l,className:"sans-serif br2 charcoal",boxShadow:"rgba(105, 196, 205, 0.5) 0px 1px 10px 0px",width:"auto",arrowAlign:c||"center",arrowMarginRight:"".concat(s,"px"),top:m.height,left:-m.width-d,translateX:-m.width,onDismiss:i},n.createElement("div",{className:"flex flex-column pa2",ref:o,role:"menu"},a))))};H.defaultProps={arrowMarginRight:13};const W=(e,t)=>{let{width:a,arrowMarginRight:n}=t;return"right"===e?a+2*n:0},$=H;function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},J.apply(this,arguments)}const Q=e=>{let{className:t,children:a,...r}=e;return n.createElement("button",J({className:M()(t,"flex items-center nowrap"),role:"menuitem"},r),a)};var Y=a(49185);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},X.apply(this,arguments)}const ee=function(e){return n.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),n.createElement("path",{d:"M52 18.81A31.19 31.19 0 1083.19 50 31.22 31.22 0 0052 18.81zm0 59.78A28.59 28.59 0 1180.59 50 28.63 28.63 0 0152 78.59z"}),n.createElement("path",{d:"M66.33 40.3a.75.75 0 00-.22-.53l-3.88-3.88a.74.74 0 00-1.06 0L52 45.06l-9.17-9.17a.74.74 0 00-1.06 0l-3.88 3.88a.75.75 0 000 1.06L47.06 50l-9.17 9.17a.75.75 0 000 1.06l3.88 3.88a.74.74 0 001.06 0L52 54.94l9.17 9.17a.74.74 0 00.53.22.73.73 0 00.53-.22l3.88-3.88a.75.75 0 000-1.06L56.94 50l9.17-9.17a.75.75 0 00.22-.53zm-11 9.17a.75.75 0 000 1.06l9.17 9.17-2.8 2.82-9.17-9.17a.75.75 0 00-1.06 0l-9.17 9.17-2.82-2.82 9.17-9.17a.75.75 0 000-1.06l-9.17-9.17 2.82-2.82 9.17 9.17a.75.75 0 001.06 0l9.17-9.17 2.82 2.82z"}))};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},te.apply(this,arguments)}const ae=e=>n.createElement("svg",te({viewBox:"0 0 100 100"},e),n.createElement("path",{d:"M75.4 49.9c-.9 0-1.6.7-1.6 1.6v21.8c0 1.5-.6 2.9-1.7 4s-2.5 1.7-4 1.7h-40c-1.5 0-2.9-.6-4-1.7s-1.7-2.5-1.7-4v-40c0-1.5.6-2.9 1.7-4s2.5-1.7 4-1.7h21.8c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6H28.1c-2.4 0-4.6.9-6.3 2.6-1.7 1.7-2.6 3.9-2.6 6.3v40c0 2.4.9 4.6 2.6 6.3 1.7 1.7 3.9 2.6 6.3 2.6h40c2.4 0 4.6-.9 6.3-2.6 1.7-1.7 2.6-3.9 2.6-6.3V51.5c0-.9-.7-1.6-1.6-1.6z"}),n.createElement("path",{d:"M83.8 19.3V19v-.2-.2c0-.1-.1-.1-.1-.2 0 0 0-.1-.1-.1-.1-.1-.1-.2-.2-.2l-.2-.2s-.1 0-.1-.1l-.1-.1c-.1 0-.1 0-.2-.1H60.3c-.9 0-1.6.7-1.6 1.6s.7 1.6 1.6 1.6h17.9l-25.8 26c-.6.6-.6 1.7 0 2.3.3.3.7.5 1.1.5s.8-.2 1.1-.5l25.8-25.8v17.9c0 .9.7 1.6 1.6 1.6s1.6-.7 1.6-1.6l.2-21.9z"}));function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ne.apply(this,arguments)}const re=function(e){return n.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),n.createElement("path",{d:"M76.53 44.5a12.83 12.83 0 00-3.81.57 14.07 14.07 0 00-13.88-13.3 13.7 13.7 0 00-9.12 3.49 17 17 0 00-14.78-8.67A17.25 17.25 0 0018 42 14.84 14.84 0 006.33 56.6c0 13.89 11.56 16.81 13.84 16.81h56.2c5.21 0 12.47-7.37 12.47-14.62 0-7.03-4.61-14.29-12.31-14.29zm-.16 25.91H20.22c-.11 0-10.89-1.26-10.89-13.81a11.89 11.89 0 018-11.32C19.046 44.687 21 45 21 45v-2.25a14 14 0 0127-4.29l1 2.32 1.58-1.94a10.8 10.8 0 018.36-4 11.09 11.09 0 017.686 3.37c2.021 2.088 2.497 4.573 3.124 7.79.265 1.362.25 2 .4 3.53l1.73-.91a9.86 9.86 0 014.65-1.16c5.83 0 9.31 5.74 9.31 11.29 0 6.04-6.51 11.66-9.47 11.66z"}))},le=e=>{let{pinningServices:t,ipfsReady:a,arePinningServicesSupported:r,doFetchPinningServices:l,doFetchPinningServicesStats:c,doFetchLocalPinsStats:s,doRemovePinningService:i,localPinsSize:o,localNumberOfPins:m,t:p}=e;const[d,g]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),E=()=>g(!1),v=e=>f(e),y=()=>f(!1),[w,N]=(0,n.useState)({sortBy:"addedAt",sortDirection:P.Sr.ASC});(0,n.useEffect)((()=>{a&&l()&&c()&&s()}),[a,l,c,s]);const S=(0,n.useMemo)((()=>({name:p("localPinning"),type:"LOCAL",totalSize:o,numberOfPins:m})),[m,o,p]),k=(0,n.useMemo)((()=>(t||[]).sort((0,A.hr)(w.sortBy,w.sortDirection===P.Sr.ASC?1:-1))),[t,w.sortBy,w.sortDirection]),C=(0,n.useMemo)((()=>[S,...k]),[S,k]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"mv4 pinningManager"},n.createElement("div",{className:"ph1 ph3-l flex items-center bg-white lh-copy charcoal f6 fw5"},n.createElement(P.qj,{disableHeight:!0},(e=>{let{width:t}=e;return n.createElement(P.iA,{className:"tl fw4 w-100 f6",headerClassName:"gray ttc fw4 f6 ph2",width:t,height:50*(C.length+1),headerHeight:32,rowHeight:50,rowCount:C.length,rowGetter:e=>{let{index:t}=e;return C[t]},rowClassName:"bb b--light-gray mt2",sort:function(){return N(...arguments)},sortBy:w.sortBy,sortDirection:w.sortDirection},n.createElement(P.sg,{label:p("service"),title:p("service"),dataKey:"name",width:.4*t,flexShrink:0,flexGrow:1,cellRenderer:se,className:"charcoal truncate f6"}),n.createElement(P.sg,{label:p("pins"),title:p("pins"),dataKey:"numberOfPins",width:.2*t,flexShrink:1,cellRenderer:e=>{let{rowData:t}=e;return n.createElement(ie,{rowData:t,t:p})},className:"charcoal truncate f6 pl2"}),n.createElement(P.sg,{label:p("autoUpload"),title:p("autoUpload"),dataKey:"autoUpload",width:.2*t,flexShrink:1,cellRenderer:e=>{let{rowData:t}=e;return n.createElement(oe,{autoUpload:t.autoUpload,type:t.type,name:t.name,visitServiceUrl:t.visitServiceUrl,doRemovePinningService:i,t:p,onToggleModalOpen:v})},className:"pinningManagerColumn charcoal truncate f6 pl2"}))}))),r&&n.createElement("div",{className:"flex justify-end w-100 mt2"},n.createElement(u.Z,{className:"tc mt2",bg:"bg-navy",onClick:()=>g(!0)},n.createElement("span",null,n.createElement("span",{className:"aqua"},"+")," ",p("actions.addService"))))),n.createElement(b.Z,{show:h,onLeave:y},n.createElement(U,{className:"outline-0",onLeave:()=>{y(),l(),c()},t:p,name:h,service:k.find((e=>e.name===h))})),n.createElement(b.Z,{show:d,onLeave:E},n.createElement(D,{className:"outline-0",onLeave:()=>{E(),l(),c()},t:p})))};le.defaultProps={pinningServices:[]};const ce=e=>{let{rowData:t,index:a}=e;const r=["aqua","link","yellow","teal","red","green","navy","gray","charcoal"],l="mr2 pr1 fill-".concat(r[a%r.length]," flex-shrink-0");return t.icon?n.createElement("img",{src:t.icon,alt:t.name,width:"28",height:"28",className:l,style:{objectFit:"contain"}}):n.createElement(G.Z,{width:"28",height:"28",className:l})},se=e=>{let{rowData:t,rowIndex:a}=e;return n.createElement("div",{className:"flex items-center",title:t.name},n.createElement(ce,{rowData:t,index:a}),n.createElement("span",{className:(r=t,"LOCAL"===r.type||r.online?"truncate":"truncate red")},t.name));var r},ie=e=>{let{rowData:t,t:a}=e;return t.numberOfPins<0?n.createElement("div",{className:"red help",title:a("errors.failedToFetchTitle")},a("errors.failedToFetch")):n.createElement("div",{className:t.numberOfPins>=0?"":"gray"},t.numberOfPins>=0?t.numberOfPins:"".concat(a("app:terms:loading"),"..."))},oe=e=>{let{autoUpload:t,visitServiceUrl:a,name:r,doRemovePinningService:l,t:c,type:s,onToggleModalOpen:i}=e;return n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",{className:t?"":"gray"},"undefined"!==typeof t?c("autoUploadPolicy."+t):"-"),"LOCAL"!==s&&n.createElement(me,{doRemovePinningService:l,name:r,t:c,onToggleModalOpen:i,autoUpload:t,visitServiceUrl:a}))},me=e=>{let{doRemovePinningService:t,name:a,visitServiceUrl:r,autoUpload:l,t:c,onToggleModalOpen:s}=e;const i=(0,n.useRef)(),[o,m]=(0,n.useState)(!1),p=!a.includes(".");return n.createElement("div",null,n.createElement("button",{className:"button-inside-focus",onClick:()=>m(!0),ref:i,"aria-label":c("showOptions")},n.createElement(Y.Z,{width:24,className:"fill-gray-muted hover-fill-gray transition-all"})),n.createElement($,{className:"pv2 ph1",style:{zIndex:1001},visible:o,target:i,onDismiss:()=>m(!1),arrowAlign:"right"},p&&n.createElement(Q,{className:"pv2 ph1",onClick:()=>s(a)},n.createElement(re,{width:"28",className:"fill-aqua"})," ",n.createElement("span",{className:"ph1"},c(l?"pinningServices.removeAutoUpload":"pinningServices.addAutoUpload"))),r&&n.createElement("a",{className:"link flex items-center",href:r,target:"_blank",rel:"noopener noreferrer"},n.createElement(Q,{className:"pv2 ph1",onClick:()=>m(!1)},n.createElement(ae,{width:"28",className:"fill-aqua"})," ",n.createElement("span",{className:"ph1 charcoal"},c("visitService")))),n.createElement(Q,{className:"pv2 ph1",onClick:()=>{t(a),m(!1)}},n.createElement(ee,{width:"28",className:"fill-aqua"})," ",n.createElement("span",{className:"ph1"},c("remove")))))},pe=(0,l.$)("selectIpfsReady","selectLocalPinsSize","selectLocalNumberOfPins","selectPinningServices","selectArePinningServicesSupported","doFetchPinningServices","doFetchPinningServicesStats","doFetchLocalPinsStats","doRemovePinningService",le);var de=a(69632);function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ue.apply(this,arguments)}const ge=e=>{let{t:t,tReady:a,onCancel:r,onSubmit:l,className:c,...s}=e;return n.createElement(de.Z,ue({onSubmit:e=>l(e.trim()),onChange:e=>e.trimStart(),onCancel:r,className:c,title:t("generateKeyModal.title"),description:t("generateKeyModal.description"),Icon:y.Z,submitText:t("app:actions.generate")},s))};ge.defaultProps={className:""};const he=ge;var fe=a(88556);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ee.apply(this,arguments)}const be=e=>{let{t:t,tReady:a,name:r,onCancel:l,onSubmit:s,className:i,...o}=e;return n.createElement(de.Z,Ee({onSubmit:e=>s(e.trim()),onChange:e=>e.trimStart(),onCancel:l,className:i,title:t("renameKeyModal.title"),description:n.createElement("div",{className:"charcoal w-90 center tl mb3"},n.createElement(c.cC,{t:t,i18nKey:"renameKeyModal.description",tOptions:{name:r}},"Renaming IPNS key ",n.createElement("span",{className:"charcoal-muted monospace"},r),".")),Icon:fe.Z,defaultValue:r,mustBeDifferent:!0,submitText:t("app:actions.rename")},o))};be.defaultProps={className:""};const ve=be;var ye=a(99658);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we.apply(this,arguments)}const Ne=e=>{let{t:t,tReady:a,name:r,onCancel:l,onRemove:s,className:i,...o}=e;return n.createElement(v.u_,we({},o,{className:i,onCancel:l}),n.createElement(v.fe,{title:t("removeKeyModal.title"),Icon:ye.Z},n.createElement("div",{className:"charcoal w-100 center tl"},n.createElement(c.cC,{t:t,i18nKey:"removeKeyModal.description",tOptions:{name:r}},"Are you sure you want to delete the IPNS key ",n.createElement("span",{className:"charcoal-muted monospace"},r),"?"))),n.createElement(v.nK,null,n.createElement(u.Z,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("app:actions.cancel")),n.createElement(u.Z,{className:"ma2 tc",bg:"bg-red",onClick:s},t("app:actions.remove"))))};Ne.defaultProps={className:""};const Se=Ne,ke=e=>{let{t:t,name:a,showRenameKeyModal:r,showRemoveKeyModal:l}=e;return n.createElement("div",{className:"flex justify-end"},"self"!==a&&n.createElement(Ce,{name:a,t:t,showRenameKeyModal:r,showRemoveKeyModal:l}))},Ce=e=>{let{t:t,name:a,showRenameKeyModal:r,showRemoveKeyModal:l}=e;const c=(0,n.useRef)(),[s,i]=(0,n.useState)(!1),o=e=>()=>{e(a),i(!1)};return n.createElement("div",null,n.createElement("button",{className:"button-inside-focus",onClick:()=>i(!0),ref:c,"aria-label":t("showOptions")},n.createElement(Y.Z,{width:24,className:"fill-gray-muted hover-fill-gray transition-all"})),n.createElement($,{className:"pv2 ph1",style:{zIndex:1001},visible:s,target:c,onDismiss:()=>i(!1),arrowAlign:"right"},n.createElement(Q,{className:"pv2 ph1",onClick:o(r)},n.createElement(fe.Z,{width:"28",className:"fill-aqua"})," ",n.createElement("span",{className:"ph1"},t("app:actions.rename"))),n.createElement(Q,{className:"pv2 ph1",onClick:o(l)},n.createElement(ee,{width:"28",className:"fill-aqua"})," ",n.createElement("span",{className:"ph1"},t("app:actions.remove")))))},xe=e=>{let{t:t,ipfsReady:a,doFetchIpnsKeys:r,doGenerateIpnsKey:l,doRenameIpnsKey:c,doRemoveIpnsKey:s,availableGateway:i,ipnsKeys:o}=e;const[m,p]=(0,n.useState)(!1),d=()=>p(!1),[g,h]=(0,n.useState)(""),f=e=>h(e),E=()=>h(""),[v,y]=(0,n.useState)(""),w=e=>y(e),N=()=>y("");(0,n.useEffect)((()=>{a&&r()}),[a,r]);const[S,k]=(0,n.useState)({sortBy:"name",sortDirection:P.Sr.ASC}),C=(0,n.useMemo)((()=>(o||[]).sort((0,A.hr)(S.sortBy,S.sortDirection===P.Sr.ASC?1:-1))),[o,S.sortBy,S.sortDirection]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"mv4 pinningManager"},n.createElement("div",{className:"ph1 ph3-l flex items-center bg-white lh-copy charcoal f6 fw5"},n.createElement(P.qj,{disableHeight:!0},(e=>{let{width:a}=e;return n.createElement(P.iA,{className:"tl fw4 w-100 f6",headerClassName:"gray ttc fw4 f6 ph2",width:a,height:50*(C.length+1),headerHeight:32,rowHeight:50,rowCount:C.length,rowGetter:e=>{let{index:t}=e;return C[t]},rowClassName:"bb b--light-gray mt2",sort:function(){return k(...arguments)},sortBy:S.sortBy,sortDirection:S.sortDirection},n.createElement(P.sg,{label:t("app:terms.name"),title:t("app:terms.name"),dataKey:"name",width:.3*a,flexShrink:0,flexGrow:1,cellRenderer:e=>{let{rowData:t}=e;return t.name},className:"charcoal truncate f6"}),n.createElement(P.sg,{label:t("app:terms.id"),title:t("app:terms.id"),dataKey:"id",width:.6*a,className:"charcoal monospace truncate f6 pl2",flexShrink:1,cellRenderer:e=>{let{rowData:t}=e;return t.published?n.createElement("a",{href:"".concat(i,"/ipns/").concat(t.id),target:"_blank",rel:"noopener noreferrer",className:"link blue"},t.id):t.id}}),n.createElement(P.sg,{dataKey:"options",width:.1*a,flexShrink:1,cellRenderer:e=>{let{rowData:a}=e;return n.createElement(ke,{t:t,name:a.name,showRenameKeyModal:f,showRemoveKeyModal:w})},className:"pinningManagerColumn charcoal truncate f6 pl2"}))}))),n.createElement("div",{className:"flex justify-end w-100 mt2"},n.createElement(u.Z,{className:"tc mt2",bg:"bg-navy",onClick:()=>p(!0)},n.createElement("span",null,n.createElement("span",{className:"aqua"},"+")," ",t("actions.generateKey"))))),n.createElement(b.Z,{show:m,onLeave:d},n.createElement(he,{className:"outline-0",onSubmit:e=>{l(e),d()},onCancel:d,t:t})),n.createElement(b.Z,{show:""!==g,onLeave:E},n.createElement(ve,{className:"outline-0",name:g,onSubmit:e=>{c(g,e),E()},onCancel:E,t:t})),n.createElement(b.Z,{show:""!==v,onLeave:N},n.createElement(Se,{className:"outline-0",name:v,onRemove:e=>{s(v),N()},onCancel:N,t:t})))};xe.defaultProps={ipnsKeys:[]};const Pe=(0,l.$)("selectIpfsReady","selectIpnsKeys","selectAvailableGateway","doFetchIpnsKeys","doGenerateIpnsKey","doRemoveIpnsKey","doRenameIpnsKey",xe);var Ae=a(43697),Oe=a(94030),Me=a(72672);const _e=(0,l.$)("doUpdatePublicGateway","selectPublicGateway",(0,c.Zh)("app")((e=>{let{t:t,doUpdatePublicGateway:a,publicGateway:r}=e;const[l,c]=(0,n.useState)(r),s=!(0,Me.Rf)(l),[i,o]=(0,n.useState)(s),[m,p]=(0,n.useState)(s);(0,n.useEffect)((()=>{o(!m)}),[m]),(0,n.useEffect)((()=>{const e=(0,Me.Rf)(l);p(e),o(!e)}),[l]);const d=async e=>{e.preventDefault();try{await(0,Me.Dp)(l)}catch(t){return void o(!0)}a(l)};return n.createElement("form",{onSubmit:d},n.createElement("input",{id:"public-gateway","aria-label":t("terms.publicGateway"),placeholder:t("publicGatewayForm.placeholder"),type:"text",className:"w-100 lh-copy monospace f5 pl1 pv1 mb2 charcoal input-reset ba b--black-20 br1 ".concat(i?"focus-outline-red b--red-muted":"focus-outline-green b--green-muted"),onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&d(e)},value:l}),n.createElement("div",{className:"tr"},n.createElement(u.Z,{minWidth:100,height:40,bg:"bg-charcoal",className:"tc",disabled:l===Me.KG,onClick:async e=>{e.preventDefault(),c(Me.KG),a(Me.KG)}},t("app:actions.reset")),n.createElement(u.Z,{minWidth:100,height:40,className:"mt2 mt0-l ml2-l tc",disabled:!m||l===r},t("actions.submit"))))})));var Ze=a(38399);a(83004),a(70119);class Le extends n.Component{render(){const{value:e,readOnly:t,onChange:a}=this.props,r=Math.max(500,16*e.split("\n").length);return n.createElement("div",{className:"pv3 bg-navy br2"},n.createElement(Ze.ZP,{value:e,readOnly:t,onChange:a,mode:"json",theme:"ipfs_dark",width:"100%",height:r+"px",fontSize:12,showPrintMargin:!1,showGutter:!0,editorProps:{$blockScrolling:1/0},setOptions:{showLineNumbers:!0,tabSize:2}}))}}var Re=a(14849),Ke=a(17457);const je=(0,l.$)("selectExperiments","doExpToggleAction",(e=>{let{doExpToggleAction:t,experiments:a,t:r}=e;if(a&&a.length>0){const e=(e,t)=>r("Experiments.".concat(t?"".concat(t,".").concat(e):"".concat(e)));return n.createElement(d.Z,{className:"mb3 pa4 lh-copy"},n.createElement(Ke.Z,null,r("experiments")),n.createElement("p",{className:"db mv4 f6 charcoal mw7"},e("description")),n.createElement("div",{className:"flex flex-wrap pb3"},a.map((a=>{let{key:r,actionUrls:l,enabled:c,blocked:s}=a;return n.createElement("div",{key:r,className:"pa3 mr3 mb3 mw6 br3 bg-white dib f6 ba b1 b--light-gray"},n.createElement("h3",null,e("title",r)),n.createElement("p",{className:"charcoal"},e("description",r)),n.createElement(Re.Z,{className:"dib",disabled:s,onChange:()=>t(r,c),checked:c,label:n.createElement("span",{className:"fw5 f6"},e("label",r))}),l&&n.createElement("div",{className:"mv3"},l.map(((t,a)=>n.createElement("a",{target:"_blank",rel:"noopener noreferrer",key:t.key,className:"link blue pr2 ".concat(a>0&&"bl b1 pl2 b--light-gray"),href:t.url},e(t.key))))))}))))}return null}));var Ie=a(59249),De=a(11848),Te=a(61535),Fe=a(34585);function Ue(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ge=e=>{let{t:t,tReady:a,isIpfsConnected:l,ipfsPendingFirstConnection:o,isIpfsDesktop:p,isLoading:g,isSaving:h,arePinningServicesSupported:f,hasSaveFailed:E,hasSaveSucceded:b,hasErrors:v,hasLocalChanges:y,hasExternalChanges:w,config:N,onChange:S,onReset:k,onSave:C,editorKey:P,analyticsEnabled:A,doToggleAnalytics:O,showAnalyticsComponents:M,toursEnabled:_,handleJoyrideCallback:Z,isCliTutorModeEnabled:L,doToggleCliTutorMode:R,command:K}=e;const[j,I]=(0,n.useState)("");return n.createElement("div",{"data-id":"SettingsPage",className:"mw9 center"},n.createElement(r.ql,null,n.createElement("title",null,t("title")," | IPFS")),o?n.createElement("div",{className:"absolute flex items-center justify-center w-100 h-100",style:{background:"rgba(255, 255, 255, 0.5)",zIndex:"10"}},n.createElement(De.Z,null)):null,p?null:n.createElement(d.Z,{className:"mb3 pa4-l pa2 joyride-settings-customapi"},n.createElement("div",{className:"lh-copy charcoal"},n.createElement(Ke.Z,null,t("app:terms.apiAddress")),n.createElement(c.cC,{i18nKey:"apiDescription",t:t},n.createElement("p",null,"If your node is configured with a ",n.createElement("a",{className:"link blue",href:"https://github.com/ipfs/kubo/blob/master/docs/config.md#addresses",target:"_blank",rel:"noopener noreferrer"},"custom Kubo RPC API address"),", including a port other than the default 5001, enter it here.")),n.createElement(Oe.Z,null))),n.createElement(d.Z,{className:"mb3 pa4-l pa2"},n.createElement("div",{className:"lh-copy charcoal"},n.createElement(Ke.Z,null,t("app:terms.publicGateway")),n.createElement(c.cC,{i18nKey:"publicGatewayDescription",t:t},n.createElement("p",null,"Choose which ",n.createElement("a",{className:"link blue",href:"http://docs.ipfs.tech/concepts/ipfs-gateway/#public-gateways",target:"_blank",rel:"noopener noreferrer"},"public gateway")," you want to use to open your files.")),n.createElement(_e,null))),n.createElement(d.Z,{className:"mb3 pa4-l pa2"},n.createElement(Ke.Z,null,t("ipnsPublishingKeys.title")),n.createElement("p",{className:"ma0 mr2 lh-copy charcoal f6"},t("ipnsPublishingKeys.description"),"\xa0",n.createElement("a",{className:"link blue",target:"_blank",rel:"noopener noreferrer",href:"https://docs.ipfs.tech/concepts/glossary/#ipns"},t("learnMoreLink"))),n.createElement(Pe,{t:t})),n.createElement(d.Z,{className:"mb3 pa4-l pa2 joyride-settings-pinning"},n.createElement(Ke.Z,null,t("pinningServices.title")),n.createElement("p",{className:"ma0 mr2 lh-copy charcoal f6"},t(f?"pinningServices.description":"pinningServices.noPinRemoteDescription"),"\xa0",n.createElement("a",{className:"link blue",target:"_blank",rel:"noopener noreferrer",href:"https://docs.ipfs.tech/how-to/work-with-pinning-services/"},t("learnMoreLink"))),n.createElement(pe,{t:t})),n.createElement(d.Z,{className:"mb3 pa4-l pa2"},n.createElement("div",{className:"joyride-settings-language"},n.createElement(Ke.Z,null,t("language")),n.createElement(x,{t:t})),M?n.createElement("div",{className:"mt4 joyride-settings-analytics"},n.createElement(Ke.Z,null,t("analytics")),n.createElement(Ae.Z,{t:t,doToggleAnalytics:O,analyticsEnabled:A})):null),n.createElement(je,{t:t}),n.createElement(d.Z,{className:"mb3 pa4-l pa2 joyride-settings-tutormode"},n.createElement("div",{className:"charcoal"},n.createElement(Ke.Z,null,t("cliTutorMode")),n.createElement(Re.Z,{className:"dib",onChange:R,checked:L,label:n.createElement("span",{className:"f5 lh-copy"},t("cliToggle.label"))}),n.createElement(c.cC,{i18nKey:"cliDescription",t:t},n.createElement("p",{className:"f6 mv2"},'Enable this option to display a "view code" ',n.createElement(Te.Z,{className:"dib v-mid icon mh1 fill-charcoal",viewBox:"14 20 70 66",style:{height:24}})," icon next to common IPFS commands. Clicking it opens a modal with that command's CLI code, so you can paste it into the IPFS command-line interface in your terminal.")))),n.createElement(d.Z,{className:"mb3 pa4-l pa2"},n.createElement(Ke.Z,null,t("managePeers")),n.createElement("div",{className:"flex"},n.createElement("input",{type:"text",className:"flex-auto mr2",value:j,onChange:e=>I(e.target.value),placeholder:t("enterPeerAddress")}),n.createElement(u.Z,{onClick:async()=>{try{await window.ipfs.swarm.connect(j),alert("Peer added successfully")}catch(e){alert("Failed to add peer")}}},t("addPeer")))),l&&n.createElement(d.Z,{className:"mb3 pa4-l pa2"},n.createElement("div",{className:"joyride-settings-config"},n.createElement(Ke.Z,null,t("config")),n.createElement("div",{className:"flex pb3"},n.createElement("div",{className:"flex-auto"},n.createElement("div",{className:"mw7"},n.createElement(ze,{t:t,tReady:a,config:N,isIpfsConnected:l,isLoading:g,hasExternalChanges:w,hasSaveFailed:E,hasSaveSucceded:b}))),N?n.createElement("div",{className:"flex flex-column justify-center flex-row-l items-center-l"},n.createElement(Ie.Z,{showIcon:!0,config:N,t:t,command:K}),n.createElement(u.Z,{minWidth:100,height:40,bg:"bg-charcoal",className:"tc",disabled:h||!y&&!w,onClick:k},t("app:actions.reset")),n.createElement(Be,{t:t,tReady:a,hasErrors:v,hasSaveFailed:E,hasSaveSucceded:b,hasLocalChanges:y,hasExternalChanges:w,isSaving:h,onClick:C})):null)),N?n.createElement(Le,{value:N,onChange:S,readOnly:h,key:P}):null),n.createElement(s.ZP,{run:_,steps:i.Qu.getSteps({t:t,Trans:c.cC}),styles:i.Qu.styles,callback:Z,continuous:!0,scrollToFirstStep:!0,locale:(0,m._)(t),showProgress:!0}))},Be=e=>{let{t:t,hasErrors:a,hasSaveFailed:r,hasSaveSucceded:l,isSaving:c,hasLocalChanges:s,hasExternalChanges:i,onClick:o}=e;const m=l?"bg-green":"bg-teal";return n.createElement(u.Z,{minWidth:100,height:40,className:"mt2 mt0-l ml2-l tc",bg:m,disabled:!s||a,danger:r||i,onClick:o},l&&!r?n.createElement(p.Z,{height:16,className:"fill-snow",style:{transform:"scale(3)"}}):t(c?"app:actions.saving":"app:actions.save"))},ze=e=>{let{t:t,isIpfsConnected:a,hasExternalChanges:r,hasSaveFailed:l,hasSaveSucceded:s,isLoading:i,config:o}=e;return a?o?r?n.createElement("p",{className:"ma0 lh-copy red f5 mw7"},n.createElement(c.cC,{i18nKey:"settingsHaveChanged",t:t},"The settings have changed, please click ",n.createElement("strong",null,"Reset")," to update the editor contents")):l?n.createElement("p",{className:"ma0 lh-copy red fw6 f5 mw7"},t("errorOccured"),n.createElement("span",{className:"db fw4 f6 charcoal-muted"},t("checkConsole"))):s?n.createElement("p",{className:"ma0 lh-copy green fw6 f5 mw7"},t("changesSaved"),n.createElement("span",{className:"db fw4 f6 charcoal-muted"},t("settingsWillBeUsedNextTime"))):n.createElement("p",{className:"ma0 mr2 lh-copy charcoal f5"},t("ipfsConfigDescription")," ",n.createElement("a",{href:"https://github.com/ipfs/kubo/blob/master/docs/config.md",rel:"noopener noreferrer",target:"_blank",className:"link blue"},t("ipfsConfigHelp"))):n.createElement("p",{className:"ma0 lh-copy charcoal f5 mw7"},t(i?"fetchingSettings":"settingsUnavailable")):n.createElement("p",{className:"ma0 lh-copy charcoal f5 mw7"},t("ipfsDaemonOffline"))};class qe extends n.Component{constructor(){super(...arguments),Ue(this,"state",{hasErrors:!1,hasLocalChanges:!1,hasExternalChanges:!1,editableConfig:this.props.config,editorKey:Date.now()}),Ue(this,"onChange",(e=>{this.setState({hasErrors:!this.isValidJson(e),hasLocalChanges:this.props.config!==e,editableConfig:e})})),Ue(this,"onReset",(()=>{this.setState({hasErrors:!1,hasLocalChanges:!1,hasExternalChanges:!1,editableConfig:this.props.config,editorKey:Date.now()})})),Ue(this,"onSave",(()=>{this.props.doSaveConfig(this.state.editableConfig)}))}isValidJson(e){try{return JSON.parse(e),!0}catch(t){return!1}}isRecent(e){return e>Date.now()-3e3}componentDidUpdate(e){if(this.props.configSaveLastSuccess!==e.configSaveLastSuccess&&setTimeout((()=>this.onReset()),3e3),e.config!==this.props.config){if(!e.config||this.isRecent(this.props.configSaveLastSuccess))return this.setState({editableConfig:this.props.config});if(this.props.config!==this.state.editableConfig)return this.setState({hasExternalChanges:!0})}}render(){const{t:e,tReady:t,ipfsConnected:a,configIsLoading:r,configLastError:l,configIsSaving:c,arePinningServicesSupported:s,configSaveLastSuccess:i,configSaveLastError:o,isIpfsDesktop:m,analyticsEnabled:p,doToggleAnalytics:d,toursEnabled:u,handleJoyrideCallback:g,isCliTutorModeEnabled:h,doToggleCliTutorMode:f,ipfsPendingFirstConnection:E}=this.props,{hasErrors:b,hasLocalChanges:v,hasExternalChanges:y,editableConfig:w,editorKey:N}=this.state,S=this.isRecent(i),k=this.isRecent(o),C=r||!w&&!l;return n.createElement(Ge,{t:e,tReady:t,isIpfsConnected:a,ipfsPendingFirstConnection:E,isLoading:C,isSaving:c,arePinningServicesSupported:s,hasSaveFailed:k,hasSaveSucceded:S,hasErrors:b,hasLocalChanges:v,hasExternalChanges:y,config:w,editorKey:N,onChange:this.onChange,onReset:this.onReset,onSave:this.onSave,isIpfsDesktop:m,analyticsEnabled:p,doToggleAnalytics:d,toursEnabled:u,handleJoyrideCallback:g,doToggleCliTutorMode:f,isCliTutorModeEnabled:h,command:Fe.UL[Fe.aD.UPDATE_IPFS_CONFIG]()})}}const Ve=(0,c.Zh)("settings")(qe),He=(0,l.$)("selectConfig","selectIpfsConnected","selectIpfsPendingFirstConnection","selectConfigLastError","selectConfigIsLoading","selectConfigIsSaving","selectConfigSaveLastSuccess","selectConfigSaveLastError","selectIsIpfsDesktop","selectToursEnabled","selectShowAnalyticsComponents","selectAnalyticsEnabled","selectArePinningServicesSupported","doToggleAnalytics","doSaveConfig","selectIsCliTutorModeEnabled","doToggleCliTutorMode",(0,o.Z)(Ve))},70119:()=>{ace.define("ace/theme/ipfs_dark",["require","exports","module","ace/lib/dom"],(function(e,t,a){t.isDark=!0,t.cssClass="ace-ipfs-dark",t.cssText="\n  .ace-ipfs-dark .ace_gutter {\n  background: #0b3a53;\n  color: #9ad4db;\n  }\n  .ace-ipfs-dark .ace_print-margin {\n  width: 1px;\n  background: #69c4cd;\n  }\n  .ace-ipfs-dark {\n  background-color: #0b3a53;\n  color: #9ad4db;\n  }\n  .ace-ipfs-dark .ace_entity.ace_other.ace_attribute-name,\n  .ace-ipfs-dark .ace_storage {\n  color: #f7f8fa;\n  }\n  .ace-ipfs-dark .ace_rparen,\n  .ace-ipfs-dark .ace_lparen {\n    color: #9ad4db;\n  }\n  .ace-ipfs-dark .ace_cursor,\n  .ace-ipfs-dark .ace_string.ace_regexp {\n  color: #ea5037\n  }\n  .ace-ipfs-dark .ace_marker-layer .ace_active-line,\n  .ace-ipfs-dark .ace_marker-layer .ace_selection {\n  background: rgba(255, 255, 255, 0.1)\n  }\n  .ace-ipfs-dark.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px #244e66;\n  }\n  .ace-ipfs-dark .ace_marker-layer .ace_step {\n  background: rgb(102, 82, 0)\n  }\n  .ace-ipfs-dark .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgba(147, 161, 161, 0.50)\n  }\n  .ace-ipfs-dark .ace_gutter-active-line {\n  background-color: #244e66\n  }\n  .ace-ipfs-dark .ace_marker-layer .ace_selected-word {\n  border: 1px solid #244e66\n  }\n  .ace-ipfs-dark .ace_invisible {\n  color: rgba(147, 161, 161, 0.50)\n  }\n  .ace-ipfs-dark .ace_keyword,\n  .ace-ipfs-dark .ace_meta,\n  .ace-ipfs-dark .ace_support.ace_class,\n  .ace-ipfs-dark .ace_support.ace_type {\n  color: #0aca9f\n  }\n  .ace-ipfs-dark .ace_constant.ace_character,\n  .ace-ipfs-dark .ace_constant.ace_other {\n  color: #f36149\n  }\n  .ace-ipfs-dark .ace_constant.ace_language {\n  color: #f9a13e\n  }\n  .ace-ipfs-dark .ace_constant.ace_numeric {\n  color: #f39021\n  }\n  .ace-ipfs-dark .ace_fold {\n  background-color: #69c4cd;\n  border-color: #93A1A1\n  }\n  .ace-ipfs-dark .ace_entity.ace_name.ace_function,\n  .ace-ipfs-dark .ace_entity.ace_name.ace_tag,\n  .ace-ipfs-dark .ace_support.ace_function,\n  .ace-ipfs-dark .ace_variable,\n  .ace-ipfs-dark .ace_variable.ace_language {\n  color: #edf0f4\n  }\n  .ace-ipfs-dark .ace_string {\n  color: #0aca9f\n  }\n  .ace-ipfs-dark .ace_comment {\n  font-style: italic;\n  color: #657B83\n  }\n  .ace-ipfs-dark .ace_indent-guide {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNg0Db1ZVCxc/sPAAd4AlUHlLenAAAAAElFTkSuQmCC) right repeat-y\n  }";e("../lib/dom").importCssString(t.cssText,t.cssClass)}))}}]);
//# sourceMappingURL=835.05c1f0d9.chunk.js.map